#:kivy 1.9.0

<DelEventPopup>:
    size_hint: (0.3, 0.3)
    title: 'Voulez vous vraiment supprimer cet évènement?'
    title_size: 15

    BoxLayout:
        spacing: 20
        padding: 20
        Button:
            text: "Oui"
            on_release: root.delete_event()
        Button:
            text: "Non"
            on_release: root.dismiss()

<EventHandler>:
    size_hint: (0.6, 0.6)
    title: "Gestion d'un évènement"
    title_size: 20
    auto_dismiss: False

    name: name
    location: location
    begin: begin
    end: end

    GridLayout:
        spacing: "15dp"
        padding: "15dp"
        cols: 2

        Label:
            font_size: 18
            text: "Nom"
            text_size: self.size
            valign: "middle"
        TextForm:
            id: name
            font_size: 18
            write_tab: False
        Label:
            font_size: 18
            text: "Lieu"
            text_size: self.size
            valign: "middle"
        TextForm:
            id: location
            font_size: 18
            write_tab: False
        Label:
            font_size: 18
            text: "Date début"
            text_size: self.size
            valign: "middle"
        TextForm:
            id: begin
            font_size: 18
            input_type: 'datetime'
            write_tab: False
        Label:
            font_size: 18
            text: "Date fin"
            text_size: self.size
            valign: "middle"
        TextForm:
            id: end
            font_size: 18
            input_type: 'datetime'
            write_tab: False
        Button:
            text: "Annuler"
            font_size: 15
            on_release: root.dismiss()
        Button:
            text: "Sauvegarder"
            font_size: 15
            on_release: root.save()


<Event>:
    event:
    name: name
    date: date
    size_hint_y: None
    height: 64


    BoxLayout:
        pos: root.pos
        orienation: "horizontal"
        width: self.parent.width
        height: self.parent.height
        spacing: "20dp"

        BoxLayout:
            orientation: "vertical"
            size_hint: (0.7, 1)

            Label:
                id: name
                size_hint: (1, 0.7)
                font_size: 25
                text_size: self.size

            Label:
                id: date
                size_hint: (1, 0.3)
                font_size: 15
                text_size: self.size

        Button:
            size_hint: (None, None)
            on_release: root.add_contact()
            background_normal: "img/add_contact.png"
            height: root.height
            width: root.height
            border: (0, 0, 0, 0)
        Button:
            size_hint: (None, None)
            on_release: root.edit_event()
            background_normal: "img/edit_event.png"
            height: root.height
            width: root.height
            border: (0, 0, 0, 0)
        Button:
            size_hint: (None, None)
            on_release: root.delete_event()
            background_normal: "img/delete_event.png"
            height: root.height
            width: root.height
            border: (0, 0, 0, 0)


<EventsList>:
    list_layout: list_layout_id

    BoxLayout:
        orientation: "vertical"
        spacing: "5dp"
        padding: "5dp"

        BoxLayout:
            size_hint: (1, 0.15)
            orientation: "horizontal"
            spacing: "10dp"

            Image:
                source: "img/logo.png"
                size_hint: (None, 1)

            Label:
                size_hint: (1, 1)
                font_size: 30
                text: "Liste des évènements"

            Button:
                background_normal: "img/save_csv.png"
                size_hint: (None, 1)
                width: self.height
                border: (0, 0, 0, 0)
                on_release: root.save_csv()

            Button:
                background_normal: "img/sync.png"
                size_hint: (None, 1)
                width: self.height
                border: (0, 0, 0, 0)
                on_release: root.sync()

        BoxLayout:
            id: list_layout_id
            orientation: "vertical"
            size_hint: (1, 0.9)
            spacing: 10
            padding: 10

        Button:
            size_hint: (None, None)
            width: 200
            height: 75
            text: "Ajouter un évènement"
            font_size: "20dp"
            on_release: root.add_event()
            background_color: [0.5, 0.5, 1., 0.7]
